#!/bin/bash

set -e

# Trust certificates from DOTNET_SSL_DIRS.
if [ -n "$DOTNET_SSL_DIRS" ]; then
  # The main process (PID 1) sets up a certificate folder. The other processes use it.
  if [ $$ -eq 1 ]; then
    source /opt/app-root/etc/trust_ssl_dirs
  else
    export SSL_CERT_DIR="$DOTNET_SSL_CERT_DIR"
  fi
fi

cmd="$1"; shift
exec $cmd "$@"
